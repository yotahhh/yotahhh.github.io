<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yves spiri</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a1a;
            color: #d4ceb8;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            line-height: 1.6;
            padding: 20px;
            position: relative;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.06'/%3E%3C/svg%3E");
            z-index: 1;
        }

        .content {
            max-width: 800px;
            position: relative;
            z-index: 2;
            filter: url(#textNoise);
        }

        h1 {
            font-size: 2em;
            margin-bottom: 0.3em;
            font-weight: normal;
        }

        h2 {
            font-size: 1.2em;
            margin: 2em 0 1em 0;
            font-weight: normal;
            display: none;
        }

        p {
            margin-bottom: 1em;
        }

        nav {
            margin: 2em 0;
        }

        nav a {
            color: #d4ceb8;
            text-decoration: none;
            margin-right: 1.5em;
            transition: color 0.2s;
        }

        nav a:hover {
            color: var(--hover-color);
        }

        nav a.active {
            color: var(--active-color);
        }

        nav a:visited {
            color: var(--visited-color);
        }

        a {
            color: #d4ceb8;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--hover-color);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .projects {
            margin-top: 2em;
        }

        .project {
            margin-bottom: 3em;
        }

        .cd-case-container {
            margin-top: 1em;
            text-align: center;
        }

        .cd-case-canvas {
            display: block;
            cursor: grab;
            margin: 0 auto;
            max-width: 100%;
            border: 1px solid #d4ceb8;
        }

        .cd-case-canvas:active {
            cursor: grabbing;
        }

        .cd-info {
            margin-top: 0.5em;
            font-size: 12px;
            color: #999;
        }

        .audio-player {
            margin-top: 1em;
            display: flex;
            align-items: center;
            gap: 1em;
        }

        .audio-player audio {
            flex: 1;
            max-width: 400px;
        }

        .category {
            margin-top: 3em;
        }

        .category h3 {
            font-size: 1.5em;
            margin-bottom: 1.5em;
            font-weight: normal;
        }

        iframe {
            max-width: 100%;
            margin-top: 1em;
            border: 1px solid #d4ceb8;
        }

        @media (max-width: 600px) {
            body {
                padding: 15px;
                font-size: 14px;
            }

            h1 {
                font-size: 1.5em;
            }

            nav a {
                margin-right: 1em;
            }
        }
    </style>
</head>
<body>
    <svg style="position: absolute; width: 0; height: 0;" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <filter id="textNoise">
                <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" result="noise" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.4" />
            </filter>
        </defs>
    </svg>

    <div class="content">
        <nav>
            <a href="#about" onclick="showSection('about'); return false;">about</a>
            <a href="#works" onclick="showSection('works'); return false;">works</a>
        </nav>

        <div id="about" class="section active">
            <h1>yves spiri</h1>
            <img src="images/yves.jpg" alt="yves spiri" style="max-width: 300px; margin: 2em 0; border: 1px solid #d4ceb8;">
            
            <p>Yves Spiri (he/him) lives in Bern and currently studies MA Sound Design in Zurich. He is obsessed with everything that involves sound, be it music, games, film, events, or other art forms.</p>
            
            <p>His approach has been to experience as many different roles and perspectives when working with sound: production, engineering, mixing, mastering, event organizing, curation, booking, teaching, and sound design for advertisements and animation films. Sound design for games is still missing and is probably his most anticipated role to date, as Yves is a big game nerd who has been observing the industry by playing games and listening to countless hours of interviews with veterans and insiders.</p>
            
            <p>Yves has been working with sound and media creatively and technically for over ten years. At the same time, he feels his journey has only just begun and is more eager and excited than ever to work on projects, preferably film and games. Yves has been releasing music under the pseudonym "Yotah" and is always working on the next piece, learning as he goes.</p>
            
            <p style="margin-top: 2em;">Want to work together? Check out his work and get in touch.</p>
            
            <p style="margin-top: 2em;">Email: <a href="mailto:hi@yvesspiri.net">hi@yvesspiri.net</a><br>
            Instagram: <a href="https://instagram.com/yotahmusic" target="_blank">@yotahmusic</a><br>
            SoundCloud: <a href="https://soundcloud.com/yotahhh" target="_blank">soundcloud.com/yotahhh</a></p>
        </div>

        <div id="works" class="section">
            <h2>works</h2>
            
            <div class="category">
                <h3>music</h3>
                <div class="projects">
                    <div class="project">
                        <p><strong>LiDAR EP</strong></p>
                        <p>"LiDAR" EP is a collaboration with Voicheck. After experiencing numerous collective moments on dance floors, Yotah and Voicheck were inspired to share their own take on bass music. Blending fast-paced rhythms with gritty basslines and a touch of experimental sound design, 'LiDAR' carries a heavy, yet playful energy, originating from their deep-rooted friendship.</p>
                        <div class="cd-case-container">
                            <canvas class="cd-case-canvas" id="cdcase-LiDA" width="800" height="600"></canvas>
                            <div class="cd-info">Drag to rotate</div>
                        </div>
                        <div class="audio-player">
                            <audio controls>
                                <source src="mp3/LiDA.mp3" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>
                    
                    <div class="project">
                        <p><strong>Rewiring EP</strong></p>
                        <p>"Rewiring" EP was Yotah's debut released on Nostro Hood System, a label based in Bristol UK: NHS's twentieth release introduces a newcomer, Yotah, with their debut EP "Rewiring," showcasing four tracks blending chunky maximalism and intricate modulation. Yotah's creative process involved learning and unlearning various music styles, resulting in a sound that echoes past patterns reinterpreted and rewired in his mind. "Rewiring" delves into hybridized sonics, breaking through consolidated patterns to explore the unknown, reflecting Yotah's evolving musical journey.</p>
                        <div class="cd-case-container">
                            <canvas class="cd-case-canvas" id="cdcase-Rewi" width="800" height="600"></canvas>
                            <div class="cd-info">Drag to rotate</div>
                        </div>
                        <div class="audio-player">
                            <audio controls>
                                <source src="mp3/Rewi.mp3" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="category">
                <h3>film</h3>
                <div class="projects">
                    <div class="project">
                        <p><strong>Animation Film</strong></p>
                        <p>Sound Design for Cleverclip, Bern. Here is one of a few animated advertisement shorts that Yves did the sound design for:</p>
                        <iframe src="https://player.vimeo.com/video/722502612?app_id=122963&h=e4ecb67fb0&referrer=https%3A%2F%2Fwww.vitamed-gmbh.ch%2F" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const neonColors = ['#ff00ff', '#00ffff', '#00ff00', '#ffff00', '#ff0080', '#0080ff', '#ff6600', '#ff0066'];
        
        const shuffled = [...neonColors].sort(() => Math.random() - 0.5);
        document.documentElement.style.setProperty('--hover-color', shuffled[0]);
        document.documentElement.style.setProperty('--active-color', shuffled[1]);
        document.documentElement.style.setProperty('--visited-color', shuffled[2]);

        function showSection(id) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            
            const links = document.querySelectorAll('nav a');
            links.forEach(l => l.classList.remove('active'));
            document.querySelector(`nav a[href="#${id}"]`).classList.add('active');
            
            history.replaceState(null, null, '#' + id);
        }

        // handle browser back/forward
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.slice(1) || 'about';
            showSection(hash);
        });

        // load correct section on page load
        if (window.location.hash) {
            const hash = window.location.hash.slice(1);
            showSection(hash);
        } else {
            history.replaceState(null, null, '#about');
        }

        // CD Case WebGL Code
        function initCDCase(canvasId, imagePrefix) {
            const canvas = document.getElementById(canvasId);
            const gl = canvas.getContext('webgl');
            
            if (!gl) {
                console.error('WebGL not supported');
                return;
            }

            const vsSource = `
                attribute vec4 aPosition;
                attribute vec2 aTexCoord;
                attribute vec3 aNormal;
                uniform mat4 uModelViewMatrix;
                uniform mat4 uProjectionMatrix;
                uniform mat4 uNormalMatrix;
                varying vec2 vTexCoord;
                varying vec3 vNormal;
                varying vec3 vViewPos;
                
                void main() {
                    vec4 viewPos = uModelViewMatrix * aPosition;
                    gl_Position = uProjectionMatrix * viewPos;
                    vTexCoord = aTexCoord;
                    vNormal = normalize((uNormalMatrix * vec4(aNormal, 0.0)).xyz);
                    vViewPos = viewPos.xyz;
                }
            `;

            const fsSource = `
                precision highp float;
                varying vec2 vTexCoord;
                varying vec3 vNormal;
                varying vec3 vViewPos;
                uniform sampler2D uSampler;
                uniform sampler2D uBackSampler;
                uniform int uMaterial;
                uniform int uHasBack;
                
                void main() {
                    vec3 normal = normalize(vNormal);
                    vec3 viewDir = normalize(-vViewPos);
                    vec3 light1 = normalize(vec3(2.0, 3.0, 4.0));
                    vec3 light2 = normalize(vec3(-1.5, 1.0, 2.0));
                    float diff1 = max(dot(normal, light1), 0.0);
                    float diff2 = max(dot(normal, light2), 0.0) * 0.5;
                    vec3 halfDir1 = normalize(light1 + viewDir);
                    float spec1 = pow(max(dot(normal, halfDir1), 0.0), 64.0);
                    float ambient = 0.3;
                    
                    if (uMaterial == 0) {
                        vec4 tex = texture2D(uSampler, vTexCoord);
                        float light = ambient + diff1 * 0.65 + diff2 * 0.35;
                        gl_FragColor = vec4(tex.rgb * light, 1.0);
                    } else if (uMaterial == 5) {
                        vec4 tex;
                        if (uHasBack == 1) {
                            tex = texture2D(uBackSampler, vTexCoord);
                        } else {
                            tex = texture2D(uSampler, vTexCoord);
                            tex.a = 1.0;
                        }
                        float light = ambient + diff1 * 0.65 + diff2 * 0.35;
                        gl_FragColor = vec4(tex.rgb * light, tex.a);
                    } else if (uMaterial == 1) {
                        float ndotv = abs(dot(normal, viewDir));
                        float fresnel = pow(1.0 - ndotv, 4.0);
                        fresnel = mix(0.03, 0.25, fresnel);
                        vec3 plasticTint = vec3(0.88, 0.90, 0.92);
                        vec3 color = plasticTint * (ambient * 0.4 + diff1 * 0.25 + diff2 * 0.15);
                        color += vec3(1.0) * spec1 * 0.9;
                        gl_FragColor = vec4(color, 0.08 + fresnel);
                    } else if (uMaterial == 2) {
                        float ndotv = abs(dot(normal, viewDir));
                        float fresnel = pow(1.0 - ndotv, 2.0);
                        vec3 color = vec3(0.08, 0.08, 0.1) * (ambient * 0.7 + diff1 * 0.4 + diff2 * 0.25);
                        color += vec3(1.0) * spec1 * 0.4;
                        gl_FragColor = vec4(color, 0.5 + fresnel * 0.3);
                    } else {
                        float ndotv = abs(dot(normal, viewDir));
                        float fresnel = pow(1.0 - ndotv, 3.0);
                        vec3 color = vec3(0.9, 0.92, 0.94) * (ambient * 0.6 + diff1 * 0.3 + diff2 * 0.2);
                        color += vec3(1.0) * spec1 * 0.6;
                        gl_FragColor = vec4(color, 0.15 + fresnel * 0.25);
                    }
                }
            `;

            function createShader(type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                return shader;
            }

            const program = gl.createProgram();
            gl.attachShader(program, createShader(gl.VERTEX_SHADER, vsSource));
            gl.attachShader(program, createShader(gl.FRAGMENT_SHADER, fsSource));
            gl.linkProgram(program);

            const loc = {
                attr: {
                    position: gl.getAttribLocation(program, 'aPosition'),
                    texCoord: gl.getAttribLocation(program, 'aTexCoord'),
                    normal: gl.getAttribLocation(program, 'aNormal')
                },
                uni: {
                    modelView: gl.getUniformLocation(program, 'uModelViewMatrix'),
                    projection: gl.getUniformLocation(program, 'uProjectionMatrix'),
                    normalMat: gl.getUniformLocation(program, 'uNormalMatrix'),
                    sampler: gl.getUniformLocation(program, 'uSampler'),
                    backSampler: gl.getUniformLocation(program, 'uBackSampler'),
                    material: gl.getUniformLocation(program, 'uMaterial'),
                    hasBack: gl.getUniformLocation(program, 'uHasBack')
                }
            };

            function createBuffer(data) {
                const buf = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, buf);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);
                return buf;
            }

            function quad(mat, x, y, z, w, h, nx, ny, nz, flipTex = false) {
                const pos = [x, y, z, x + w, y, z, x, y + h, z, x, y + h, z, x + w, y, z, x + w, y + h, z];
                const tex = flipTex ? [1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1] : [0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1];
                const norm = Array(6).fill([nx, ny, nz]).flat();
                return { pos: createBuffer(pos), tex: createBuffer(tex), norm: createBuffer(norm), mat, count: 6 };
            }

            const w = 1.2, h = 1.2, d = 0.05, t = 0.02;
            const buffers = [
                quad(0, -w / 2, -h / 2, d, w, h, 0, 0, 1),
                quad(5, -w / 2, -h / 2, -d, w, h, 0, 0, -1, true),
                quad(1, -w / 2, -h / 2, -d, w, h * 2, 0, 0, -1),
                quad(4, -w / 2, -h / 2, -d, w, t, 0, -1, 0),
                quad(4, -w / 2, h / 2 - t, -d, w, t, 0, 1, 0),
                quad(4, -w / 2, -h / 2, -d, t, h, -1, 0, 0),
                quad(4, w / 2 - t, -h / 2, -d, t, h, 1, 0, 0)
            ];

            let rotation = 0.3, autoRotate = true, lastTime = Date.now();
            let texture = null, backTexture = null;

            function perspective(fov, aspect, near, far) {
                const f = 1 / Math.tan(fov / 2), nf = 1 / (near - far);
                return [f / aspect, 0, 0, 0, 0, f, 0, 0, 0, 0, (far + near) * nf, -1, 0, 0, 2 * far * near * nf, 0];
            }

            function mat4() { return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]; }

            function translate(m, v) {
                const out = [...m];
                out[12] = m[0] * v[0] + m[4] * v[1] + m[8] * v[2] + m[12];
                out[13] = m[1] * v[0] + m[5] * v[1] + m[9] * v[2] + m[13];
                out[14] = m[2] * v[0] + m[6] * v[1] + m[10] * v[2] + m[14];
                return out;
            }

            function rotateY(m, a) {
                const s = Math.sin(a), c = Math.cos(a);
                const out = [...m];
                out[0] = m[0] * c - m[8] * s;
                out[1] = m[1] * c - m[9] * s;
                out[2] = m[2] * c - m[10] * s;
                out[8] = m[0] * s + m[8] * c;
                out[9] = m[1] * s + m[9] * c;
                out[10] = m[2] * s + m[10] * c;
                return out;
            }

            function invert(m) {
                const a = m, out = [], det = a[0] * (a[5] * a[10] - a[6] * a[9]) - a[1] * (a[4] * a[10] - a[6] * a[8]) + a[2] * (a[4] * a[9] - a[5] * a[8]);
                const invDet = 1 / det;
                out[0] = (a[5] * a[10] - a[6] * a[9]) * invDet;
                out[1] = -(a[1] * a[10] - a[2] * a[9]) * invDet;
                out[2] = (a[1] * a[6] - a[2] * a[5]) * invDet;
                out[4] = -(a[4] * a[10] - a[6] * a[8]) * invDet;
                out[5] = (a[0] * a[10] - a[2] * a[8]) * invDet;
                out[6] = -(a[0] * a[6] - a[2] * a[4]) * invDet;
                out[8] = (a[4] * a[9] - a[5] * a[8]) * invDet;
                out[9] = -(a[0] * a[9] - a[1] * a[8]) * invDet;
                out[10] = (a[0] * a[5] - a[1] * a[4]) * invDet;
                return [out[0], out[1], out[2], 0, out[4], out[5], out[6], 0, out[8], out[9], out[10], 0, 0, 0, 0, 1];
            }

            function transpose(m) {
                return [m[0], m[4], m[8], m[12], m[1], m[5], m[9], m[13], m[2], m[6], m[10], m[14], m[3], m[7], m[11], m[15]];
            }

            function draw() {
                gl.clearColor(0.1, 0.1, 0.1, 1);
                gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
                gl.enable(gl.DEPTH_TEST);
                gl.enable(gl.BLEND);
                gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

                const proj = perspective(45 * Math.PI / 180, canvas.width / canvas.height, 0.1, 100);
                const mv = rotateY(translate(mat4(), [0, 0, -3.5]), rotation);
                const norm = transpose(invert(mv));

                gl.useProgram(program);
                gl.uniformMatrix4fv(loc.uni.projection, false, proj);
                gl.uniformMatrix4fv(loc.uni.modelView, false, mv);
                gl.uniformMatrix4fv(loc.uni.normalMat, false, norm);
                gl.uniform1i(loc.uni.hasBack, backTexture ? 1 : 0);

                if (texture) {
                    gl.activeTexture(gl.TEXTURE0);
                    gl.bindTexture(gl.TEXTURE_2D, texture);
                    gl.uniform1i(loc.uni.sampler, 0);
                }
                if (backTexture) {
                    gl.activeTexture(gl.TEXTURE1);
                    gl.bindTexture(gl.TEXTURE_2D, backTexture);
                    gl.uniform1i(loc.uni.backSampler, 1);
                }

                buffers.forEach(b => {
                    if (b.mat === 0 || (b.mat === 5 && !backTexture)) {
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.pos);
                        gl.vertexAttribPointer(loc.attr.position, 3, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.position);
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.tex);
                        gl.vertexAttribPointer(loc.attr.texCoord, 2, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.texCoord);
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.norm);
                        gl.vertexAttribPointer(loc.attr.normal, 3, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.normal);
                        gl.uniform1i(loc.uni.material, b.mat);
                        gl.drawArrays(gl.TRIANGLES, 0, b.count);
                    }
                });

                gl.depthMask(false);
                buffers.forEach(b => {
                    if (b.mat === 1 || b.mat === 4 || (b.mat === 5 && backTexture)) {
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.pos);
                        gl.vertexAttribPointer(loc.attr.position, 3, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.position);
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.tex);
                        gl.vertexAttribPointer(loc.attr.texCoord, 2, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.texCoord);
                        gl.bindBuffer(gl.ARRAY_BUFFER, b.norm);
                        gl.vertexAttribPointer(loc.attr.normal, 3, gl.FLOAT, false, 0, 0);
                        gl.enableVertexAttribArray(loc.attr.normal);
                        gl.uniform1i(loc.uni.material, b.mat);
                        gl.drawArrays(gl.TRIANGLES, 0, b.count);
                    }
                });
                gl.depthMask(true);
            }

            function animate() {
                if (autoRotate) {
                    const now = Date.now();
                    rotation += ((now - lastTime) / 1000) * 0.3;
                    lastTime = now;
                    draw();
                }
                requestAnimationFrame(animate);
            }

            function loadTexture(img) {
                const tex = gl.createTexture();
                gl.bindTexture(gl.TEXTURE_2D, tex);
                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
                return tex;
            }

            function createBackTexture(text) {
                const c = document.createElement('canvas');
                c.width = c.height = 512;
                const ctx = c.getContext('2d');
                
                ctx.clearRect(0, 0, 512, 512);
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, 512, 512);
                
                ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';
                ctx.font = '24px Arial';
                const lines = text.split('\n');
                lines.forEach((line, i) => {
                    if (line.trim()) ctx.fillText(line.trim(), 50, 50 + i * 32);
                });
                const img = new Image();
                img.onload = () => { backTexture = loadTexture(img); draw(); };
                img.src = c.toDataURL();
            }

            // Load cover image
            const coverImg = new Image();
            coverImg.crossOrigin = "anonymous";
            coverImg.onload = () => { 
                texture = loadTexture(coverImg); 
                draw(); 
            };
            coverImg.src = 'images/' + imagePrefix + '.jpg';

            // Load back text
            fetch('text/' + imagePrefix + '.txt')
                .then(response => response.text())
                .then(text => createBackTexture(text))
                .catch(err => console.log('No back text file found'));

            let dragging = false, lastX = 0;
            canvas.addEventListener('mousedown', e => { dragging = true; autoRotate = false; lastX = e.clientX; });
            canvas.addEventListener('mousemove', e => {
                if (dragging) {
                    rotation += (e.clientX - lastX) * 0.01;
                    lastX = e.clientX;
                    lastTime = Date.now();
                    draw();
                }
            });
            canvas.addEventListener('mouseup', () => {
                dragging = false;
                setTimeout(() => { if (!dragging) { autoRotate = true; lastTime = Date.now(); } }, 2000);
            });
            canvas.addEventListener('mouseleave', () => {
                dragging = false;
                setTimeout(() => { if (!dragging) { autoRotate = true; lastTime = Date.now(); } }, 2000);
            });

            animate();
        }

        // Initialize CD cases when works section is viewed
        if (window.location.hash === '#works') {
            setTimeout(() => {
                initCDCase('cdcase-LiDA', 'LiDA');
                initCDCase('cdcase-Rewi', 'Rewi');
            }, 100);
        }

        // Add event listener to initialize when switching to works
        const worksLink = document.querySelector('a[href="#works"]');
        if (worksLink) {
            worksLink.addEventListener('click', () => {
                setTimeout(() => {
                    if (!document.getElementById('cdcase-LiDA').getContext) return;
                    initCDCase('cdcase-LiDA', 'LiDA');
                    initCDCase('cdcase-Rewi', 'Rewi');
                }, 100);
            });
        }
    </script>
</body>
</html>